---
    - hosts: dbservers
      become: true
    
      vars:
        mysql_root_password: example
    
      tasks:
      - name: "Install mysql-server"
        apt:
          update_cache: yes
          name: mysql-server
          state: present
    
      - name: "Install ansible python3 mysql dependency"
        apt:
          name: python3-mysqldb
          state: latest
    
      - name: tart mysql service
        command: sudo systemctl start mysql.service
    
      - name: Ensure root user can only login from localhost
        mysql_user:
          login_password: "{{ mysql_root_password }}"
          check_implicit_admin: yes
          name: root
          password: "{{ mysql_root_password }}"
          state: present
    
      - name: Reload privilege tables
        command: |
          mysql -p{{ mysql_root_password }} -ne "{{ item }}"
        with_items:
          - FLUSH PRIVILEGES
        changed_when: False
    
    
        
     #   db:
      #    image: mysql:8.0.28-oracle
     #     command: --default-authentication-plugin=mysql_native_password
      #    restart: always
      #    environment:
      #      MYSQL_ROOT_PASSWORD: example
      #    ports:
      #      - 3306:3306
    